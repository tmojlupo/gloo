
---
title: "transformation.proto"
weight: 5
---

<!-- Code generated by solo-kit. DO NOT EDIT. -->


### Package: `envoy.api.v2.filter.http` 
#### Types:


- [FilterTransformations](#filtertransformations)
- [TransformationRule](#transformationrule)
- [Transformations](#transformations)
- [RouteTransformations](#routetransformations)
- [RouteTransformation](#routetransformation)
- [RequestMatch](#requestmatch)
- [ResponseMatch](#responsematch)
- [ResponseMatcher](#responsematcher)
- [ResponseTransformationRule](#responsetransformationrule)
- [Transformation](#transformation)
- [Extraction](#extraction)
- [TransformationTemplate](#transformationtemplate)
- [DynamicMetadataValue](#dynamicmetadatavalue)
- [RequestBodyParse](#requestbodyparse)
- [InjaTemplate](#injatemplate)
- [Passthrough](#passthrough)
- [MergeExtractorsToBody](#mergeextractorstobody)
- [HeaderBodyTransform](#headerbodytransform)
  



##### Source File: [github.com/solo-io/gloo/projects/gloo/api/external/envoy/extensions/transformation/transformation.proto](https://github.com/solo-io/gloo/blob/master/projects/gloo/api/external/envoy/extensions/transformation/transformation.proto)





---
### FilterTransformations



```yaml
"transformations": []envoy.api.v2.filter.http.TransformationRule
"stage": int

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 
| `transformations` | [[]envoy.api.v2.filter.http.TransformationRule](../transformation.proto.sk/#transformationrule) | Specifies transformations based on the route matches. The first matched transformation will be applied. If there are overlapped match conditions, please put the most specific match first. |  |
| `stage` | `int` | Only RouteTransformations.RouteTransformation with matching stage will be used with this filter. |  |




---
### TransformationRule



```yaml
"match": .envoy.config.route.v3.RouteMatch
"routeTransformations": .envoy.api.v2.filter.http.TransformationRule.Transformations

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 
| `match` | [.envoy.config.route.v3.RouteMatch](../../../../../../../../../../../envoy/config/route/v3/route_components.proto.sk/#routematch) | The route matching parameter. Only when the match is satisfied, the "requires" field will apply. For example: following match will match all requests. .. code-block:: yaml match: prefix: /. |  |
| `routeTransformations` | [.envoy.api.v2.filter.http.TransformationRule.Transformations](../transformation.proto.sk/#transformations) | transformation to perform. |  |




---
### Transformations



```yaml
"requestTransformation": .envoy.api.v2.filter.http.Transformation
"clearRouteCache": bool
"responseTransformation": .envoy.api.v2.filter.http.Transformation

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 
| `requestTransformation` | [.envoy.api.v2.filter.http.Transformation](../transformation.proto.sk/#transformation) | Apply a transformation to requests. |  |
| `clearRouteCache` | `bool` | Clear the route cache if the request transformation was applied. |  |
| `responseTransformation` | [.envoy.api.v2.filter.http.Transformation](../transformation.proto.sk/#transformation) | Apply a transformation to responses. |  |




---
### RouteTransformations



```yaml
"requestTransformation": .envoy.api.v2.filter.http.Transformation
"responseTransformation": .envoy.api.v2.filter.http.Transformation
"clearRouteCache": bool
"transformations": []envoy.api.v2.filter.http.RouteTransformations.RouteTransformation

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 
| `requestTransformation` | [.envoy.api.v2.filter.http.Transformation](../transformation.proto.sk/#transformation) | deprecated. Use transformations[].request_match.request_transformation instead. |  |
| `responseTransformation` | [.envoy.api.v2.filter.http.Transformation](../transformation.proto.sk/#transformation) | deprecated. Use transformations[].request_match.response_transformation instead. |  |
| `clearRouteCache` | `bool` | deprecated. Use transformations[].request_match.clear_route_cache instead. |  |
| `transformations` | [[]envoy.api.v2.filter.http.RouteTransformations.RouteTransformation](../transformation.proto.sk/#routetransformation) |  |  |




---
### RouteTransformation



```yaml
"stage": int
"requestMatch": .envoy.api.v2.filter.http.RouteTransformations.RouteTransformation.RequestMatch
"responseMatch": .envoy.api.v2.filter.http.RouteTransformations.RouteTransformation.ResponseMatch

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 
| `stage` | `int` | Stage number. This transformation will only be processed by filters with the same stage number. |  |
| `requestMatch` | [.envoy.api.v2.filter.http.RouteTransformations.RouteTransformation.RequestMatch](../transformation.proto.sk/#requestmatch) |  Only one of `requestMatch` or `responseMatch` can be set. |  |
| `responseMatch` | [.envoy.api.v2.filter.http.RouteTransformations.RouteTransformation.ResponseMatch](../transformation.proto.sk/#responsematch) |  Only one of `responseMatch` or `requestMatch` can be set. |  |




---
### RequestMatch



```yaml
"match": .envoy.config.route.v3.RouteMatch
"requestTransformation": .envoy.api.v2.filter.http.Transformation
"responseTransformation": .envoy.api.v2.filter.http.Transformation
"clearRouteCache": bool

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 
| `match` | [.envoy.config.route.v3.RouteMatch](../../../../../../../../../../../envoy/config/route/v3/route_components.proto.sk/#routematch) | if no match is specified, will match all. |  |
| `requestTransformation` | [.envoy.api.v2.filter.http.Transformation](../transformation.proto.sk/#transformation) | transformation to perform. |  |
| `responseTransformation` | [.envoy.api.v2.filter.http.Transformation](../transformation.proto.sk/#transformation) |  |  |
| `clearRouteCache` | `bool` | clear the route cache if the request transformation was applied. |  |




---
### ResponseMatch



```yaml
"match": .envoy.api.v2.filter.http.ResponseMatcher
"responseTransformation": .envoy.api.v2.filter.http.Transformation

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 
| `match` | [.envoy.api.v2.filter.http.ResponseMatcher](../transformation.proto.sk/#responsematcher) |  |  |
| `responseTransformation` | [.envoy.api.v2.filter.http.Transformation](../transformation.proto.sk/#transformation) | transformation to perform. |  |




---
### ResponseMatcher



```yaml
"headers": []envoy.config.route.v3.HeaderMatcher
"responseCodeDetails": .envoy.type.matcher.v3.StringMatcher

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 
| `headers` | [[]envoy.config.route.v3.HeaderMatcher](../../../../../../../../../../../envoy/config/route/v3/route_components.proto.sk/#headermatcher) | Specifies a set of headers that the route should match on. The router will check the response headers against all the specified headers in the route config. A match will happen if all the headers in the route are present in the request with the same values (or based on presence if the value field is not in the config). |  |
| `responseCodeDetails` | [.envoy.type.matcher.v3.StringMatcher](../../../../../../../../../../../envoy/type/matcher/v3/string.proto.sk/#stringmatcher) | Only match responses with non empty response code details (this usually implies a local reply). |  |




---
### ResponseTransformationRule



```yaml
"match": .envoy.api.v2.filter.http.ResponseMatcher
"responseTransformation": .envoy.api.v2.filter.http.Transformation

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 
| `match` | [.envoy.api.v2.filter.http.ResponseMatcher](../transformation.proto.sk/#responsematcher) |  |  |
| `responseTransformation` | [.envoy.api.v2.filter.http.Transformation](../transformation.proto.sk/#transformation) | transformation to perform. |  |




---
### Transformation

 
This message defines a transformation.

```yaml
"transformationTemplate": .envoy.api.v2.filter.http.TransformationTemplate
"headerBodyTransform": .envoy.api.v2.filter.http.HeaderBodyTransform

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 
| `transformationTemplate` | [.envoy.api.v2.filter.http.TransformationTemplate](../transformation.proto.sk/#transformationtemplate) | Apply transformation templates. Only one of `transformationTemplate` or `headerBodyTransform` can be set. |  |
| `headerBodyTransform` | [.envoy.api.v2.filter.http.HeaderBodyTransform](../transformation.proto.sk/#headerbodytransform) | This type of transformation will make all the headers available in the response body. The resulting JSON body will consist of two attributes: 'headers', containing the headers, and 'body', containing the original body. Only one of `headerBodyTransform` or `transformationTemplate` can be set. |  |




---
### Extraction

 
Extractions can be used to extract information from the request/response.
The extracted information can then be referenced in template fields.

```yaml
"header": string
"body": .google.protobuf.Empty
"regex": string
"subgroup": int

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 
| `header` | `string` | Extract information from headers. Only one of `header` or `body` can be set. |  |
| `body` | [.google.protobuf.Empty](https://developers.google.com/protocol-buffers/docs/reference/csharp/class/google/protobuf/well-known-types/empty) | Extract information from the request/response body. Only one of `body` or `header` can be set. |  |
| `regex` | `string` | Only strings matching this regular expression will be part of the extraction. The most simple value for this field is '.*', which matches the whole source. The field is required. If extraction fails the result is an empty value. |  |
| `subgroup` | `int` | If your regex contains capturing groups, use this field to determine which group should be selected. |  |




---
### TransformationTemplate

 
Defines a transformation template.

```yaml
"advancedTemplates": bool
"extractors": map<string, .envoy.api.v2.filter.http.Extraction>
"headers": map<string, .envoy.api.v2.filter.http.InjaTemplate>
"body": .envoy.api.v2.filter.http.InjaTemplate
"passthrough": .envoy.api.v2.filter.http.Passthrough
"mergeExtractorsToBody": .envoy.api.v2.filter.http.MergeExtractorsToBody
"parseBodyBehavior": .envoy.api.v2.filter.http.TransformationTemplate.RequestBodyParse
"ignoreErrorOnParse": bool
"dynamicMetadataValues": []envoy.api.v2.filter.http.TransformationTemplate.DynamicMetadataValue

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 
| `advancedTemplates` | `bool` | If set to true, use JSON pointer notation (e.g. "time/start") instead of dot notation (e.g. "time.start") to access JSON elements. Defaults to false. Please note that, if set to 'true', you will need to use the `extraction` function to access extractors in the template (e.g. '{{ extraction("my_extractor") }}'); if the default value of 'false' is used, extractors will simply be available by their name (e.g. '{{ my_extractor }}'). |  |
| `extractors` | `map<string, .envoy.api.v2.filter.http.Extraction>` | Use this attribute to extract information from the request. It consists of a map of strings to extractors. The extractor will defines which information will be extracted, while the string key will provide the extractor with a name. You can reference extractors by their name in templates, e.g. "{{ my-extractor }}" will render to the value of the "my-extractor" extractor. |  |
| `headers` | `map<string, .envoy.api.v2.filter.http.InjaTemplate>` | Use this attribute to transform request/response headers. It consists of a map of strings to templates. The string key determines the name of the resulting header, the rendered template will determine the value. |  |
| `body` | [.envoy.api.v2.filter.http.InjaTemplate](../transformation.proto.sk/#injatemplate) | Apply a template to the body. Only one of `body`, or `mergeExtractorsToBody` can be set. |  |
| `passthrough` | [.envoy.api.v2.filter.http.Passthrough](../transformation.proto.sk/#passthrough) | This will cause the transformation filter not to buffer the body. Use this setting if the response body is large and you don't need to transform nor extract information from it. Only one of `passthrough`, or `mergeExtractorsToBody` can be set. |  |
| `mergeExtractorsToBody` | [.envoy.api.v2.filter.http.MergeExtractorsToBody](../transformation.proto.sk/#mergeextractorstobody) | Merge all defined extractors to the request/response body. If you want to nest elements inside the body, use dot separator in the extractor name. Only one of `mergeExtractorsToBody`, or `passthrough` can be set. |  |
| `parseBodyBehavior` | [.envoy.api.v2.filter.http.TransformationTemplate.RequestBodyParse](../transformation.proto.sk/#requestbodyparse) |  |  |
| `ignoreErrorOnParse` | `bool` | If set to true, Envoy will not throw an exception in case the body parsing fails. |  |
| `dynamicMetadataValues` | [[]envoy.api.v2.filter.http.TransformationTemplate.DynamicMetadataValue](../transformation.proto.sk/#dynamicmetadatavalue) | Use this field to set Dynamic Metadata. |  |




---
### DynamicMetadataValue

 
Defines an [Envoy Dynamic
Metadata](https://www.envoyproxy.io/docs/envoy/latest/configuration/advanced/well_known_dynamic_metadata)
entry.

```yaml
"metadataNamespace": string
"key": string
"value": .envoy.api.v2.filter.http.InjaTemplate

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 
| `metadataNamespace` | `string` | The metadata namespace. Defaults to the filter namespace. |  |
| `key` | `string` | The metadata key. |  |
| `value` | [.envoy.api.v2.filter.http.InjaTemplate](../transformation.proto.sk/#injatemplate) | A template that determines the metadata value. |  |




---
### RequestBodyParse

 
Determines how the body will be parsed.

| Name | Description |
| ----- | ----------- | 
| `ParseAsJson` | Will attempt to parse the request/response body as JSON |
| `DontParse` | The request/response body will be treated as plain text |




---
### InjaTemplate

 
Defines an [Inja template](https://github.com/pantor/inja) that will be
rendered by Gloo. In addition to the core template functions, the Gloo
transformation filter defines the following custom functions:
- header(header_name): returns the value of the header with the given name
- extraction(extractor_name): returns the value of the extractor with the
given name
- env(env_var_name): returns the value of the environment variable with the
given name
- body(): returns the request/response body
- context(): returns the base JSON context (allowing for example to range on
a JSON body that is an array)

```yaml
"text": string

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 
| `text` | `string` |  |  |




---
### Passthrough



```yaml

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 




---
### MergeExtractorsToBody



```yaml

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 




---
### HeaderBodyTransform



```yaml

```

| Field | Type | Description | Default |
| ----- | ---- | ----------- |----------- | 





<!-- Start of HubSpot Embed Code -->
<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/5130874.js"></script>
<!-- End of HubSpot Embed Code -->
